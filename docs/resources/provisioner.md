---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "smallstep_provisioner Resource - terraform-provider-smallstep"
subcategory: ""
description: |-
  Provisioners https://smallstep.com/docs/step-ca/provisioners/ are methods of using the CA to get certificates with different modes of authorization.
---

# smallstep_provisioner (Resource)

[Provisioners](https://smallstep.com/docs/step-ca/provisioners/) are methods of using the CA to get certificates with different modes of authorization.

## Example Usage

```terraform
resource "smallstep_provisioner" "my_oidc" {
  authority_id = smallstep_authority.basic.id
  name         = "My OIDC example.com"
  type         = "OIDC"

  oidc = {
    client_id              = "abc123"
    client_secret          = "xyz789"
    configuration_endpoint = "https://accounts.google.com/.well-known/openid-configuration"
  }
}

resource "smallstep_provisioner" "my_jwk" {
  authority_id = smallstep_authority.basic.id
  name         = "jwk1"
  type         = "JWK"

  jwk = {
    key           = file("${path.module}/foo.pub")
    encrypted_key = file("${path.module}/foo.priv")
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `authority_id` (String) The UUID of the authority this provisioner is attached to
- `name` (String) The name of the provisioner.
- `type` (String) The type of provisioner. Allowed values: `OIDC` `JWK`

### Optional

- `claims` (Attributes) A set of constraints configuring how this provisioner can be used to issue certificates. (see [below for nested schema](#nestedatt--claims))
- `jwk` (Attributes) A [provisioner](https://smallstep.com/docs/step-ca/provisioners/#jwk) that uses public-key cryptography to sign and validate a JSON Web Token (JWT). This object is required when type is `JWK` and is otherwise ignored. (see [below for nested schema](#nestedatt--jwk))
- `oidc` (Attributes) A [provisioner](https://smallstep.com/docs/step-ca/provisioners/#oauthoidc-single-sign-on) that trusts an OAuth provider's ID tokens for authentication. This object is required when type is `OIDC` and is otherwise ignored. (see [below for nested schema](#nestedatt--oidc))
- `options` (Attributes) Options that apply when issuing certificates with this provisioner (see [below for nested schema](#nestedatt--options))

### Read-Only

- `created_at` (String) Timestamp of when the provisioner was created in RFC 3339 format. Generated server-side.
- `id` (String) A UUID identifying this provisioner. Generated server-side when the provisioner is created.

<a id="nestedatt--claims"></a>
### Nested Schema for `claims`

Optional:

- `allow_renewal_after_expiry` (Boolean) Allow renewals for expired certificates generated by this provisioner.
- `default_host_ssh_cert_duration` (String) The default duration for an SSH host certificate generated by this provisioner. Parsed as a [Golang duration](https://pkg.go.dev/time#ParseDuration).
- `default_tls_cert_duration` (String) The default duration for an x509 certificate generated by this provisioner. Parsed as a [Golang duration](https://pkg.go.dev/time#ParseDuration).
- `default_user_ssh_cert_duration` (String) The default duration for an SSH user certificate generated by this provisioner. Parsed as a [Golang duration](https://pkg.go.dev/time#ParseDuration).
- `disable_renewal` (Boolean) Disable renewal for all certificates generated by this provisioner.
- `enable_ssh_ca` (Boolean) Allow this provisioner to be used to generate SSH certificates.
- `max_host_ssh_cert_duration` (String) The maximum duration for an SSH host certificate generated by this provisioner. Parsed as a [Golang duration](https://pkg.go.dev/time#ParseDuration).
- `max_tls_cert_duration` (String) The maximum duration for an x509 certificate generated by this provisioner. Parsed as a [Golang duration](https://pkg.go.dev/time#ParseDuration).
- `max_user_ssh_cert_duration` (String) The maximum duration for an SSH user certificate generated by this provisioner. Parsed as a [Golang duration](https://pkg.go.dev/time#ParseDuration).
- `min_host_ssh_cert_duration` (String) The minimum duration for an SSH host certificate generated by this provisioner. Parsed as a [Golang duration](https://pkg.go.dev/time#ParseDuration).
- `min_tls_cert_duration` (String) The minimum duration for an x509 certificate generated by this provisioner. Parsed as a [Golang duration](https://pkg.go.dev/time#ParseDuration).
- `min_user_ssh_cert_duration` (String) The minimum duration for an SSH user certificate generated by this provisioner. Parsed as a [Golang duration](https://pkg.go.dev/time#ParseDuration).


<a id="nestedatt--jwk"></a>
### Nested Schema for `jwk`

Required:

- `key` (String) The public JSON web key

Optional:

- `encrypted_key` (String) The JWE encrypted private key


<a id="nestedatt--oidc"></a>
### Nested Schema for `oidc`

Required:

- `client_id` (String) The id used to validate the audience in an OpenID Connect token.
- `configuration_endpoint` (String) OpenID Connect configuration URL.

Optional:

- `admins` (List of String) The emails of admin users in an OpenID Connect provisioner. These users will not have restrictions in the certificates to sign.
- `client_secret` (String) The secret used to obtain the OpenID Connect tokens.
- `domains` (List of String) The domains used to validate the email claim in an OpenID Connect provisioner.
- `groups` (List of String) The group list used to validate the groups extension in an OpenID Connect token.
- `listen_address` (String) The callback address used in the OpenID Connect flow.
- `tenant_id` (String) The tenant-id used to replace the templatized tenantid value in the OpenID Configuration.


<a id="nestedatt--options"></a>
### Nested Schema for `options`

Optional:

- `ssh` (Attributes) Options that apply when issuing SSH certificates (see [below for nested schema](#nestedatt--options--ssh))
- `x509` (Attributes) Options that apply when issuing x509 certificates (see [below for nested schema](#nestedatt--options--x509))

<a id="nestedatt--options--ssh"></a>
### Nested Schema for `options.ssh`

Optional:

- `template` (String) A JSON representation of the SSH certificate to be created. [More info](https://smallstep.com/docs/step-ca/templates/#ssh-templates).
- `template_data` (String) A map of data that can be used by the certificate template.


<a id="nestedatt--options--x509"></a>
### Nested Schema for `options.x509`

Optional:

- `template` (String) A JSON representation of the x509 certificate to be created. [More info](https://smallstep.com/docs/step-ca/templates/#x509-templates).
- `template_data` (String) A map of data that can be used by the certificate template.

## Import

Import is supported using the following syntax:

```shell
terraform import smallstep_provisioner.my_jwk_provisioner b1161f78-d251-401e-b17c-fe38fc26ae7b/my_jwk_provisioner
```
