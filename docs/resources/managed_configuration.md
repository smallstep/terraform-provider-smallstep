---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "smallstep_managed_configuration Resource - terraform-provider-smallstep"
subcategory: ""
description: |-
  The agent and managed endpoints used in one host.
---

# smallstep_managed_configuration (Resource)

The agent and managed endpoints used in one host.

## Example Usage

```terraform
resource "smallstep_managed_configuration" "mc" {
  agent_configuration_id = smallstep_agent_configuration.agent1.id
  host_id                = "9cdaf513-3296-4037-bd9b-d0634f51cd79"
  name                   = "DB Server"
  managed_endpoints = [
    {
      endpoint_configuration_id = smallstep_endpoint_configuration.x509.id
      x509_certificate_data = {
        common_name = "db"
        sans = [
          "db",
          "db.default",
          "db.default.svc",
          "db.defaulst.svc.cluster.local",
        ]
      }
    },
    {
      endpoint_configuration_id = smallstep_endpoint_configuration.ssh.id
      ssh_certificate_data = {
        key_id     = "abc"
        principals = ["ops", "eng"]
      }
    },
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `agent_configuration_id` (String) UUID identifying the agent configuration.
- `managed_endpoints` (Attributes Set) All the information used by an agent to grant a certificate to an endpoint. Exactly one of `x509CertificateData` or `sshCertificateData` must be set and must match the endpoint configuration certificate info type. (see [below for nested schema](#nestedatt--managed_endpoints))
- `name` (String) The name of this managed configuration.

### Optional

- `host_id` (String) UUID identifying the host this managed configuration is for. Will be generated on server-side if not provided.

### Read-Only

- `id` (String) UUID identifying this managed configuration.

<a id="nestedatt--managed_endpoints"></a>
### Nested Schema for `managed_endpoints`

Required:

- `endpoint_configuration_id` (String) UUID identifying the endpoint configuration.

Optional:

- `ssh_certificate_data` (Attributes) Contains the information to include when granting an SSH certificate to an endpoint. (see [below for nested schema](#nestedatt--managed_endpoints--ssh_certificate_data))
- `x509_certificate_data` (Attributes) Contains the information to include when granting an x509 certificate to an endpoint. (see [below for nested schema](#nestedatt--managed_endpoints--x509_certificate_data))

Read-Only:

- `id` (String) UUID identifying this managed endpoint. Generated server-side on creation.

<a id="nestedatt--managed_endpoints--ssh_certificate_data"></a>
### Nested Schema for `managed_endpoints.ssh_certificate_data`

Required:

- `key_id` (String) The key ID to include in the endpoint certificate.
- `principals` (Set of String) The principals to include in the endpoint certificate.


<a id="nestedatt--managed_endpoints--x509_certificate_data"></a>
### Nested Schema for `managed_endpoints.x509_certificate_data`

Required:

- `common_name` (String) The Common Name to be used in the subject of the endpoint certificate.
- `sans` (Set of String) The list of SANs to include in the endpoint certificate.

## Import

Import is supported using the following syntax:

```shell
terraform import smallstep_managed_configuration.mc 411009f5-b30d-4c16-818f-cefcc71d86b4
```
